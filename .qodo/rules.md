# Правила работы с проектом @orion76/ng-plugin

## Общие принципы
- Пиши кратко и по делу, по умолчанию на русском языке
- Делай минимально необходимые изменения
- Предпочитай точечные правки (`replace_in_file`) вместо перезаписи целых файлов
- Не добавляй тяжёлую разметку в ответы, используй простые списки

## Архитектура плагинов
- Соблюдай паттерн Plugin из базовой библиотеки `@orion76/plugin`
- Используй декоратор `@NgPlugin` для регистрации плагинов
- Наследуй плагины от базового класса `NgPluginBase` или `PluginBase`
- Опирайся на интерфейсы `IPluginDefinition` и `IPlugin`
- Используй инже��шн-токены Angular (например `PLUGIN_DEFINITION`)
- Применяй dependency injection Angular для получения зависимостей

## Работа с шаблонами
- Перед правкой шаблонов изучи `templates/standard/plugin.ts` и соответствующие типы
- Шаблоны должны быть совместимы с архитектурой плагинов
- Поддерживай два типа шаблонов: `standard` и `from-config`

## Структура кода
- Основная логика в директории `src/`
- Публичный API экспортируется через `src/public-api.ts`
- Декораторы в `src/decorators/`
- Инжекшн-токены в `src/injection-tokens.ts`
- Менеджер плагинов в `src/plugin-manager/`
- Билдер плагинов в `src/plugin-builder/`

## Тестирование и сборка
- После правок в кодовой базе запускай проверки в порядке: lint → build → test
- Используй `npm run test:console` для быстрого тестирования
- Сборка библиотеки выполняется в директорию `lib/`
- Конфигур��ция тестов в `karma-terminal.conf.js`

## TypeScript и ESLint
- Соблюдай строгий режим TypeScript (`strict: true`)
- Используй экспериментальные декораторы (`experimentalDecorators: true`)
- Следуй правилам ESLint из `eslint.config.js`
- Целевая версия ES2022

## Версионирование и публикация
- Используй `npm run update-version` для обновления версии
- Скрипт `npm run install:plugin` для локальной установки
- Поддерживай совместимость с peer dependency `@orion76/plugin`

## Документация
- Обновляй README.md при изменении API
- Поддерживай документацию на русском и китайском языках
- Добавляй примеры использования в директорию `examples/`

## Запрещённые действия
- Не нарушай архитектуру плагинов
- Не изменяй публичный API без веских причин
- Не добавляй breaking changes без обновления major версии
- Не игнорируй TypeScript ошибки и ESLint предупреждения